<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AMF-Placer: Load the Output Placement in Vivado</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AMF-Placer<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">An Open-Source Analytical Mixed-size FPGA Placer</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_2_6__loadthe_output_placementin_vivado.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Load the Output Placement in Vivado </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Load the Output Placement in Vivado</h1>
<p >After the placemnt completes, a Tcl file will be generated in the directory specified by "dumpDirectory" in the JSON configuration file. Currently, the mentioned Tcl file is named "DumpCLBPacking-first-0.tcl" since it is dumped by the <a class="el" href="class_parallel_c_l_b_packer.html" title="ParallelCLBPacker will finally pack LUT/FF/MUX/CARRY elements into legal CLB sites in a parallel appr...">ParallelCLBPacker</a>.</p>
<p >You can go through the following steps to load the <a class="el" href="class_a_m_f_placer.html" title="AMFPlacer is an analytical mixed-size FPGA placer.">AMFPlacer</a> result into Vivado Implementation.</p>
<ul>
<li>a. Please ensure that your Vivado has the license for the specific device, so you can open the Device window by clicking on the top bar "Window-&gt;Device"</li>
<li>b. Open your design in Vivado and click on "Open Implemented Design" in the flow navigator and execut the command below in the Tcl console of Vivado.</li>
</ul>
<div class="fragment"><div class="line"># replace XXXXX with the path specified by the &quot;dumpDirectory&quot; you specified in the configuration files.</div>
<div class="line">source XXXXX/DumpCLBPacking-first-0.tcl</div>
</div><!-- fragment --><ul>
<li>c. Then you can wait until the placement and routing finish. The Tcl script will clear the Vivado placement result and packing information, which might take ~10 minutes for medium-size designs (50% resource). Then it will place the cells according to the <a class="el" href="class_a_m_f_placer.html" title="AMFPlacer is an analytical mixed-size FPGA placer.">AMFPlacer</a> result, which might take ~20 minutes for medium-size designs (50% resource). Finally, it will call Vivado Placer to verify <a class="el" href="class_a_m_f_placer.html" title="AMFPlacer is an analytical mixed-size FPGA placer.">AMFPlacer</a>'s placement, handle a small number (tens) of Xilinx primitive cells (e.g., the clock buffer placement) and do routing.</li>
</ul>
<p >Below is a screenshot when the <a class="el" href="class_a_m_f_placer.html" title="AMFPlacer is an analytical mixed-size FPGA placer.">AMFPlacer</a>'s placement is loading on Vivado. The orange blocks means the cells are placed are set fixed on the device.</p>
<center> <img src="loadPlacement.png" alt="AMFPlacer's placement is loading on Vivado" align="center" title="AMFPlacer&apos;s placement is loading on Vivado" width="400" class="inline"/> </center><p >Users can launch Vivado GUI, open their Vivado project, directly "Open Implemented Design" and source the tcl file generated by AMF-Placer.</p>
<center> <img src="openImpl.png" alt="openImpled Design" align="center" title="openImpled Design" width="200" class="inline"/> </center><p >This placement loading flow might be a bit tricky since we are trying to be compatible with Vivado. Theoratically, since we utilize "catch" in the Tcl script to handle the errors, the flow should not be stopped by those minor exceptions and we have tested this flow with Vivado 2019-2021. If you encounter unexpected problems, please feel free to let us know in <a href="https://github.com/zslwyuan/AMF-Placer/issues">GitHub Issue</a>.</p>
<p >There might be some known problems when you are trying to load the generated placement into Vivado. Please check <a class="el" href="_7_portability_to_vivado_problem.html">the existing problems when exporting to Vivado</a> for reasons and solutions.</p>
<p >For users' testing and exploration, we provide some Vivado projects of the benchmarks with post-implementation designs from <a class="el" href="_3_3__download_post_implementation_vivado_projects.html">here</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="_2_get_started.html">Get Started</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
