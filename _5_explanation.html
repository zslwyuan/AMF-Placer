<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AMF-Placer: Implementation Explanation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AMF-Placer<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">An Open-Source Analytical Mixed-size FPGA Placer</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_5_explanation.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Implementation Explanation </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_doc_pages__5_explanation"></a> Here, we will explain the placement flow by going through the functionality of the major modules in the placer. Of course, you can also make full use of the Doxygen diagram to trace the call graphs to understand their relationship. We try to avoid multi-level class during implementation so it is easier for beginners to trace the call graphs.</p>
<ol type="1">
<li><a class="el" href="class_design_info.html" title="Information related to FPGA designs, including design cells and their interconnections.">DesignInfo</a>: Information related to FPGA designs, including design cells and their interconnections.</li>
<li><a class="el" href="class_device_info.html" title="Information class related to FPGA device, including the details of BEL/Site/Tile/ClockRegion.">DeviceInfo</a>: Information class related to FPGA device, including the details of BEL/Site/Tile/ClockRegion.</li>
<li><a class="el" href="class_placement_info.html" title="Information related to FPGA placement (wirelength optimization, cell spreading, legalization,...">PlacementInfo</a>: Information related to FPGA placement (wirelength optimization, cell spreading, legalization, packing)</li>
<li><a class="el" href="class_placement_timing_info.html" title="PlacementTimingInfo is the container which record the timing information related to placement.">PlacementTimingInfo</a>: The container which record the timing information related to placement.</li>
<li><a class="el" href="class_global_placer.html" title="GlobalPlacer accounts for the general iterations in global placement.">GlobalPlacer</a>: accounts for the general iterations in global placement including wirelength optimization, cell spreading, legalization, area adjustion...<ul>
<li>a. <a class="el" href="class_cluster_placer.html" title="ClusterPlacer will cluster nodes in the given netlist and place the clusters on the device based on s...">ClusterPlacer</a>: cluster nodes in the given netlist and place the clusters on the device based on simulated-annealing as initial placement.</li>
<li>b. <a class="el" href="class_wirelength_optimizer.html" title="WirelengthOptimizer builds numerical models based on the element locations and calls solvers to find ...">WirelengthOptimizer</a>: builds numerical models based on the element locations and calls solvers to find an optimal solution of the placement.</li>
<li>c. <a class="el" href="class_general_spreader.html" title="GeneralSpreader accounts for the cell spreading, which controls the cell density of specific resource...">GeneralSpreader</a>: accounts for the cell spreading, which controls the cell density of specific resource type, under the device constraints for specific regions.</li>
<li>d. <a class="el" href="class_macro_legalizer.html" title="MacroLegalizer maps DSP/BRAM/CARRY macros to legal location.">MacroLegalizer</a>: maps DSP/BRAM/CARRY macros to legal location</li>
<li>e. <a class="el" href="class_c_l_b_legalizer.html" title="CLBLegalizer maps CLBs (each of which consists of one site) to legal location. e.g....">CLBLegalizer</a>: maps CLBs (each of which consists of one site) to legal location. e.g. LUTRAM, except those CLBs in CARRY8_Chain.</li>
</ul>
</li>
<li><a class="el" href="class_initial_packer.html" title="InitialPacker will identify macros from the design netlist based on pattern matching.">InitialPacker</a>: identifies macros from the design netlist based on pattern matching</li>
<li><a class="el" href="class_incremental_b_e_l_packer.html" title="IncrementalBELPacker incrementally packs some LUTs/FFs during global placement based on their distanc...">IncrementalBELPacker</a>: incrementally packs some LUTs/FFs during global placement based on their distance, interconnection density and compatibility</li>
<li><a class="el" href="class_placement_timing_optimizer.html">PlacementTimingOptimizer</a>: based on the timing information and the placement information, adjusts some terms in the quadratic models which can improve the timing.</li>
<li><a class="el" href="class_parallel_c_l_b_packer.html" title="ParallelCLBPacker will finally pack LUT/FF/MUX/CARRY elements into legal CLB sites in a parallel appr...">ParallelCLBPacker</a>: finally packs LUT/FF/MUX/CARRY elements into legal CLB sites in a parallel approach.</li>
</ol>
<p >Below is the overall flow of <a class="el" href="class_a_m_f_placer.html" title="AMFPlacer is an analytical mixed-size FPGA placer.">AMFPlacer</a> and a visualized procedure is shown in the figure below. If you are interested in the details of <a class="el" href="class_a_m_f_placer.html" title="AMFPlacer is an analytical mixed-size FPGA placer.">AMFPlacer</a> runtime behaviors, you can find the concrete explanation [here](<a class="el" href="_6_runtime_log.html">Runtime Log Explanation</a>).</p>
<ol type="1">
<li><a class="el" href="class_a_m_f_placer.html" title="AMFPlacer is an analytical mixed-size FPGA placer.">AMFPlacer</a> will be constructed based on the <a class="el" href="class_design_info.html" title="Information related to FPGA designs, including design cells and their interconnections.">DesignInfo</a> and <a class="el" href="class_device_info.html" title="Information class related to FPGA device, including the details of BEL/Site/Tile/ClockRegion.">DeviceInfo</a>.</li>
<li>At the beginning, <a class="el" href="class_a_m_f_placer.html" title="AMFPlacer is an analytical mixed-size FPGA placer.">AMFPlacer</a> will construct the <a class="el" href="class_placement_info.html" title="Information related to FPGA placement (wirelength optimization, cell spreading, legalization,...">PlacementInfo</a> based on the <a class="el" href="class_design_info.html" title="Information related to FPGA designs, including design cells and their interconnections.">DesignInfo</a> and DeviceInfn.</li>
<li>The element attributes, locations and densities will be initialized in the <a class="el" href="class_placement_info.html" title="Information related to FPGA placement (wirelength optimization, cell spreading, legalization,...">PlacementInfo</a>.</li>
<li><a class="el" href="class_initial_packer.html" title="InitialPacker will identify macros from the design netlist based on pattern matching.">InitialPacker</a> will be called by <a class="el" href="class_a_m_f_placer.html" title="AMFPlacer is an analytical mixed-size FPGA placer.">AMFPlacer</a> to identify PlacementMacro and PlacementUnpackedCell from the design netlist.</li>
<li>The <a class="el" href="class_placement_timing_info.html" title="PlacementTimingInfo is the container which record the timing information related to placement.">PlacementTimingInfo</a> inside <a class="el" href="class_placement_info.html" title="Information related to FPGA placement (wirelength optimization, cell spreading, legalization,...">PlacementInfo</a> will be initialized by constructing a TimingGraph and checking the level of DesignCell in their corresponding timing paths.</li>
<li><a class="el" href="class_global_placer.html" title="GlobalPlacer accounts for the general iterations in global placement.">GlobalPlacer</a> will cluster the netlist based on clock information and the connectivity and initially place the cluster on the device based on <a class="el" href="class_s_a_placer.html">SAPlacer</a>.</li>
<li><a class="el" href="class_global_placer.html" title="GlobalPlacer accounts for the general iterations in global placement.">GlobalPlacer</a> will go through some global placement iteration (wirelength optimization, cell spreading, legalization)</li>
<li><a class="el" href="class_placement_info.html" title="Information related to FPGA placement (wirelength optimization, cell spreading, legalization,...">PlacementInfo</a> will set a more fine-grained cell density grid.</li>
<li>(Again) <a class="el" href="class_global_placer.html" title="GlobalPlacer accounts for the general iterations in global placement.">GlobalPlacer</a> will go through some global placement iteration (wirelength optimization, cell spreading, legalization).</li>
<li><a class="el" href="class_incremental_b_e_l_packer.html" title="IncrementalBELPacker incrementally packs some LUTs/FFs during global placement based on their distanc...">IncrementalBELPacker</a> will pair some LUTs and FFs based on their locations as an intermediate process for later packing.</li>
<li><a class="el" href="class_placement_timing_optimizer.html">PlacementTimingOptimizer</a> will enhence some net weights for timing optimization.</li>
<li><a class="el" href="class_global_placer.html" title="GlobalPlacer accounts for the general iterations in global placement.">GlobalPlacer</a> will enable <a class="el" href="class_placement_info.html" title="Information related to FPGA placement (wirelength optimization, cell spreading, legalization,...">PlacementInfo</a> (i.e., set neighbor displacement upperbound to a positive value) to conduct packing-aware (Improved UTPlacerF solution, considering cell resource, timing and net density. Enable earlier cell packing determination based on history analysis. Enable parallel exception handling.) Please note that congestion-aware cell area adjustion will be automatically enabled during global placement according to the placement convergence progress.</li>
<li>Finally, when global placement converges, <a class="el" href="class_parallel_c_l_b_packer.html" title="ParallelCLBPacker will finally pack LUT/FF/MUX/CARRY elements into legal CLB sites in a parallel appr...">ParallelCLBPacker</a> will pack the elements into the corresponding DeviceSite / DeviceBEL.</li>
</ol>
<center> <img src="overview.png" alt="Implementation Overview" title="Implementation Overview" width="800" class="inline"/> </center> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
